<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
				xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
				xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
				layout:decorate="~{layout}" 
				layout:fragment="content">
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<body>
	<main id="main" class="main">
		<section class="section">
			<div class="row">
				<div class="col-lg-12">
					<div class="card">
						<div class="card-body">
							<h1 class="card-title">로트 관리</h1>
							<div id="grid"></div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</body>																																																																																																																																																																																																																											  
<script th:inline="javascript">
	let grid;
	const token = $("meta[name='_csrf']").attr("content")
	const header = $("meta[name='_csrf_header']").attr("content");
	
	// 로딩
	$(function() {
		setElementHeight('.card', -105);
		tui.Grid.setLanguage('ko');
		tui.Grid.applyTheme('striped');
		make_grid();
	});
	
	// ------------함수------------
	// 그리드 생성 함수
	function make_grid() {
		grid = new tui.Grid({
			el : document.getElementById('grid'),
			data : [],
			scrollX : false,
			scrollY : true,
			rowHeaders : [
				{type : 'rowNum',},
				{type : 'checkbox',}, 
			],
			bodyHeight : 600,
			columns : [
				{header : '수주번호', name : 'model_cd', sortable : true, filter: 'text'},
				{header : '제품명', name : 'equipment_nm', sortable : true, filter: 'text'},
				{header : '사이즈', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '색상', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '작업시작일', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '작업수량', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '양품수량', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '불량수량', name : 'product_nm', sortable : true, filter: 'text'}, 
				{header : '완료여부', name : 'equipment_us', sortable : true, filter: 'select',
					formatter: function({value}) {
						return value == true ? '사용' : value == false ? '미사용' : '';
					}
				}, 
			],
			summary: {
				height: 40,
				position: 'bottom', // or 'top'
				columnContent: {
					equipment_us: {
						template: (valueMap) => {
							return `총 ${valueMap.cnt} 건`
						}
					}
				}
			},

		});
		
		grid.on('dblclick', function(ev) {
			let row = grid.getRow(ev.rowKey);
			if(row == null) {
				return;
			}
		});
	}
</script>
</html>